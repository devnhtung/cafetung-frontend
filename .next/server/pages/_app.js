(()=>{var e={};e.id=636,e.ids=[636],e.modules={361:e=>{"use strict";e.exports=require("next/dist/compiled/next-server/pages.runtime.prod.js")},457:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{bW:()=>n,d$:()=>u,nC:()=>c,ri:()=>o});var a=r(9191),i=e([a]);a=(i.then?(await i)():i)[0];let o=e=>(a.A.defaults.headers.Authorization=`Bearer ${e}`,a.A.get("/logout")),u=()=>a.A.get("/products"),c=()=>a.A.get("/sliders"),n=()=>a.A.get("/categories");s()}catch(e){s(e)}})},1428:e=>{"use strict";e.exports=import("axios")},2015:e=>{"use strict";e.exports=require("react")},2326:e=>{"use strict";e.exports=require("react-dom")},2386:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.r(t),r.d(t,{default:()=>c});var a=r(8732);r(2768);var i=r(3212),o=r(4391);r(4345);var u=e([i,o]);function c({Component:e,pageProps:t}){let{initialUser:r,initialToken:s,...u}=t;return(0,a.jsxs)(i.O,{initialUser:r,initialToken:s,children:[(0,a.jsx)(e,{...u}),(0,a.jsx)(o.ToastContainer,{position:"top-right",autoClose:3e3})]})}[i,o]=u.then?(await u)():u,s()}catch(e){s(e)}})},2768:()=>{},3212:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{A:()=>x,O:()=>g});var a=r(8732),i=r(2015),o=r(7991),u=r(1428),c=r(9191),n=r(457),l=r(4391),h=r(4233),d=e([u,c,n,l]);[u,c,n,l]=d.then?(await d)():d;let p=(0,i.createContext)(void 0),g=({children:e,initialUser:t,initialToken:r})=>{let[s,d]=(0,i.useState)(t||null),[g,x]=(0,i.useState)(r||null),[y,f]=(0,i.useState)(!1),[v,k]=(0,i.useState)(!0),A=(0,h.useRouter)();(0,i.useEffect)(()=>{(async()=>{try{if(!g){f(!1),d(null),k(!1);return}try{c.A.defaults.headers.Authorization=`Bearer ${g}`,await c.A.get("/user").then(e=>{d(e.data.user),f(!0),A.query.login&&(A.replace("/",void 0,{shallow:!0}),l.toast.success("Đăng nhập th\xe0nh c\xf4ng!",{position:"top-right",autoClose:3e3}))})}catch(e){d(null),f(!1),(0,o.deleteCookie)("user"),(0,o.deleteCookie)("auth_token"),u.default.get("/api/auth/clear-cookies")}}catch(e){console.error("Error checking auth:",e),d(null),f(!1),u.default.get("/api/auth/clear-cookies")}finally{k(!1)}})()},[]);let C=async()=>{try{g&&(await (0,n.ri)(g).then(()=>{d(null),f(!1),(0,o.deleteCookie)("user"),(0,o.deleteCookie)("auth_token"),u.default.get("/api/auth/clear-cookies")}),console.log("Đăng xuất th\xe0nh c\xf4ng!"))}catch(e){console.error("Error logging out:",e),d(null),f(!1)}};return(0,a.jsx)(p.Provider,{value:{user:s,token:g,setToken:x,isAuthenticated:y,isLoading:v,setUser:d,setIsAuthenticated:f,handleLogout:C},children:e})},x=()=>{let e=(0,i.useContext)(p);if(!e)throw Error("useAuth must be used within an AuthProvider");return e};s()}catch(e){s(e)}})},4075:e=>{"use strict";e.exports=require("zlib")},4391:e=>{"use strict";e.exports=import("react-toastify")},7910:e=>{"use strict";e.exports=require("stream")},7991:e=>{"use strict";e.exports=require("cookies-next")},8732:e=>{"use strict";e.exports=require("react/jsx-runtime")},9021:e=>{"use strict";e.exports=require("fs")},9191:(e,t,r)=>{"use strict";r.a(e,async(e,s)=>{try{r.d(t,{A:()=>o});var a=r(1428),i=e([a]);let o=(a=(i.then?(await i)():i)[0]).default.create({baseURL:"http://localhost:8000/api",headers:{"Content-Type":"application/json"}});s()}catch(e){s(e)}})}};var t=require("../webpack-runtime.js");t.C(e);var r=e=>t(t.s=e),s=t.X(0,[89,849],()=>r(2386));module.exports=s})();